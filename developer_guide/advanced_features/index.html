<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="Automated Python framework for near-field and far-field dosimetric assessments using Sim4Life" name="description"/><meta content="rwydaegh" name="author"/><link href="https://docs.goliat.waves-ugent.be/developer_guide/advanced_features/" rel="canonical"/><link href="../analysis/" rel="prev"/><link href="../configuration/" rel="next"/><link href="../../img/favicon.svg" rel="icon"/><meta content="mkdocs-1.5.3, mkdocs-material-9.5.3" name="generator"/><title>Advanced Features - GOLIAT Documentation</title><link href="../../assets/stylesheets/main.50c56a3b.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../../assets/_mkdocstrings.css" rel="stylesheet"/><link href="../../stylesheets/extra.css" rel="stylesheet"/><link href="../../assets/stylesheets/panzoom.css" rel="stylesheet"/><link href="../../css/ansi-colours.css" rel="stylesheet"/><link href="../../css/jupyter-cells.css" rel="stylesheet"/><link href="../../css/pandas-dataframe.css" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta content="C67JlSIlvLnht9ILTQG5rkT49B9SoIKsXok7TbuVda4" name="google-site-verification"/><meta name="panzoom-theme" content="material">
<meta name="panzoom-data" content='{"selectors": [".d2", ".mermaid"], "initial_zoom_level": 1.0}'> </head> <body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#advanced-features-a-deeper-dive"> Skip to content </a> </div> <div data-md-component="announce"> </div> <div data-md-color-scheme="default" data-md-component="outdated" hidden=""> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="GOLIAT Documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="GOLIAT Documentation"> <img alt="logo" src="../../img/goliat.svg"/> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> GOLIAT Documentation </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Advanced Features </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg> </a> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/rwydaegh/goliat" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class="md-source__repository"> rwydaegh/goliat </div> </a> </div> </nav> <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link" href="../.."> Home </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../installation/"> Installation </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../user_guide/quick_start/"> User Guide </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../tutorials/overview/"> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a class="md-tabs__link" href="../developer_guide/"> Developer Guide </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../cloud/overview/"> Cloud </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../troubleshooting/"> Troubleshooting </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../reference/full_features_list/"> Reference </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../project_info/"> Project Info </a> </li> </ul> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="GOLIAT Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="GOLIAT Documentation"> <img alt="logo" src="../../img/goliat.svg"/> </a> GOLIAT Documentation </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/rwydaegh/goliat" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class="md-source__repository"> rwydaegh/goliat </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../.."> <span class="md-ellipsis"> Home </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../installation/"> <span class="md-ellipsis"> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex=""> <span class="md-ellipsis"> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../user_guide/quick_start/"> <span class="md-ellipsis"> Quick Start </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../user_guide/user_guide/"> <span class="md-ellipsis"> User Guide </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../user_guide/ai_assistant/"> <span class="md-ellipsis"> AI Assistant </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex=""> <span class="md-ellipsis"> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../tutorials/overview/"> <span class="md-ellipsis"> Overview </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tutorials/01_far_field_basics/"> <span class="md-ellipsis"> 1. Far-Field Basics </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tutorials/02_configuration_and_caching/"> <span class="md-ellipsis"> 2. Configuration and Caching </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tutorials/03_near_field_basics/"> <span class="md-ellipsis"> 3. Near-Field Basics </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tutorials/04_gridding_and_phantom_rotation/"> <span class="md-ellipsis"> 4. Gridding and Phantom Rotation </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tutorials/05_parallel_and_cloud_execution/"> <span class="md-ellipsis"> 5. Parallel and Cloud Execution </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex=""> <span class="md-ellipsis"> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../developer_guide/"> <span class="md-ellipsis"> Overview </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../system_architecture/"> <span class="md-ellipsis"> System Architecture </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../technical_guide/"> <span class="md-ellipsis"> Technical Guide </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../analysis/"> <span class="md-ellipsis"> Analysis </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Advanced Features </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./"> <span class="md-ellipsis"> Advanced Features </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#1-high-level-workflow"> <span class="md-ellipsis"> 1. High-level workflow </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#2-gui-and-profiling-system"> <span class="md-ellipsis"> 2. GUI and profiling system </span> </a> <nav aria-label="2. GUI and profiling system" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#the-progressgui"> <span class="md-ellipsis"> The ProgressGUI </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#plot-components"> <span class="md-ellipsis"> Plot components </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#the-profiler"> <span class="md-ellipsis"> The Profiler </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#the-animation-system"> <span class="md-ellipsis"> The animation system </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#3-logging-logging_managerpy"> <span class="md-ellipsis"> 3. Logging (logging_manager.py) </span> </a> <nav aria-label="3. Logging (logging_manager.py)" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#loggers"> <span class="md-ellipsis"> Loggers: </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#implementation-details"> <span class="md-ellipsis"> Implementation details: </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#4-configuration-configpy"> <span class="md-ellipsis"> 4. Configuration (config.py) </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#5-project-management"> <span class="md-ellipsis"> 5. Project management </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#6-phantom-rotation-for-by_cheek-placement"> <span class="md-ellipsis"> 6. Phantom rotation for by_cheek placement </span> </a> <nav aria-label="6. Phantom rotation for by_cheek placement" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#configuration"> <span class="md-ellipsis"> Configuration </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#automatic-angle-detection"> <span class="md-ellipsis"> Automatic angle detection </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#workflow-integration"> <span class="md-ellipsis"> Workflow integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#65-scene-alignment-for-by_cheek-placements"> <span class="md-ellipsis"> 6.5. Scene alignment for by_cheek placements </span> </a> <nav aria-label="6.5. Scene alignment for by_cheek placements" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#how-it-works"> <span class="md-ellipsis"> How it works </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuration_1"> <span class="md-ellipsis"> Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#7-the-verify-and-resume-caching-system"> <span class="md-ellipsis"> 7. The Verify and Resume caching system </span> </a> <nav aria-label="7. The Verify and Resume caching system" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#verification-workflow"> <span class="md-ellipsis"> Verification workflow </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#overriding-the-cache"> <span class="md-ellipsis"> Overriding the cache </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#8-web-monitoring-dashboard-integration"> <span class="md-ellipsis"> 8. Web monitoring dashboard integration </span> </a> <nav aria-label="8. Web monitoring dashboard integration" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#architecture-overview"> <span class="md-ellipsis"> Architecture overview </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#message-flow"> <span class="md-ellipsis"> Message flow </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#message-types-and-handling"> <span class="md-ellipsis"> Message types and handling </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#throttling-and-batching"> <span class="md-ellipsis"> Throttling and batching </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#connection-management"> <span class="md-ellipsis"> Connection management </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#worker-identification"> <span class="md-ellipsis"> Worker identification </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#api-endpoints"> <span class="md-ellipsis"> API endpoints </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#initialization"> <span class="md-ellipsis"> Initialization </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#error-handling"> <span class="md-ellipsis"> Error handling </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#9-system-utilization-monitoring"> <span class="md-ellipsis"> 9. System utilization monitoring </span> </a> <nav aria-label="9. System utilization monitoring" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#architecture"> <span class="md-ellipsis"> Architecture </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#metrics-tracked"> <span class="md-ellipsis"> Metrics tracked </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#data-collection-and-export"> <span class="md-ellipsis"> Data collection and export </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#update-frequency"> <span class="md-ellipsis"> Update frequency </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#10-gui-screenshot-streaming"> <span class="md-ellipsis"> 10. GUI screenshot streaming </span> </a> <nav aria-label="10. GUI screenshot streaming" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#architecture_1"> <span class="md-ellipsis"> Architecture </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#capture-process"> <span class="md-ellipsis"> Capture process </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#screenshot-format"> <span class="md-ellipsis"> Screenshot format </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#error-handling_1"> <span class="md-ellipsis"> Error handling </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#dashboard-integration"> <span class="md-ellipsis"> Dashboard integration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../configuration/"> <span class="md-ellipsis"> Configuration </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../coloring_rules/"> <span class="md-ellipsis"> Coloring Rules </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex=""> <span class="md-ellipsis"> Cloud </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/overview/"> <span class="md-ellipsis"> Overview </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/osparc/"> <span class="md-ellipsis"> oSPARC </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/monitoring/"> <span class="md-ellipsis"> Monitoring dashboard </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/super_studies/"> <span class="md-ellipsis"> Super Studies </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/cloud_setup/"> <span class="md-ellipsis"> Cloud setup </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../troubleshooting/"> <span class="md-ellipsis"> Troubleshooting </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/> <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex=""> <span class="md-ellipsis"> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../reference/full_features_list/"> <span class="md-ellipsis"> Full List of Features </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../reference/api_reference/"> <span class="md-ellipsis"> API Reference </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../reference/useful_s4l_snippets/"> <span class="md-ellipsis"> Sim4Life API snippets </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../project_info/"> <span class="md-ellipsis"> Project Info </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href="https://github.com/rwydaegh/goliat/edit/master/docs/developer_guide/advanced_features.md" title="Edit this page"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg> </a> <a class="md-content__button md-icon" href="https://github.com/rwydaegh/goliat/raw/master/docs/developer_guide/advanced_features.md" title="View source of this page"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"></path></svg> </a> <h1 id="advanced-features-a-deeper-dive">Advanced features: a deeper dive<a class="headerlink" href="#advanced-features-a-deeper-dive" title="Permanent link">¶</a></h1> <p>This section details the architecture and workflow of the key operational features of the codebase, focusing on the graphical user interface (<abbr title="Graphical User Interface">GUI</abbr>), logging, session management, and the profiling/timing system.</p> <h2 id="1-high-level-workflow">1. High-level workflow<a class="headerlink" href="#1-high-level-workflow" title="Permanent link">¶</a></h2> <p>The application is designed to run scientific studies which can be time-consuming. To provide user feedback and manage complexity, the system employs a multi-process architecture.</p> <ol> <li><strong>Main Process</strong>: A lightweight PySide6 <abbr title="Graphical User Interface">GUI</abbr> (<code>ProgressGUI</code>) is launched. This <abbr title="Graphical User Interface">GUI</abbr> is responsible for displaying progress, logs, and timing information.</li> <li><strong>Study Process</strong>: The actual study (<code>NearFieldStudy</code> or <code>FarFieldStudy</code>) is executed in a separate process using Python's <code>multiprocessing</code> module. This prevents the <abbr title="Graphical User Interface">GUI</abbr> from freezing during intensive calculations.</li> <li><strong>Communication</strong>: The study process communicates with the <abbr title="Graphical User Interface">GUI</abbr> process through a <code>multiprocessing.Queue</code>. It sends messages containing status updates, progress information, and timing data.</li> </ol> <p>The entry point for the study process is the <code>study_process_wrapper</code> function, which sets up a special <code>QueueGUI</code> object. This object mimics the real <abbr title="Graphical User Interface">GUI</abbr>'s interface but directs all its output to the shared queue.</p> <div class="panzoom-box" data-key="alt" id="panzoom0" oncontextmenu="return false;"> <nav class="panzoom-nav"> <button class="panzoom-info panzoom-button"> <svg class="panzoom-icon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path> </svg> </button><button class="panzoom-reset panzoom-button"> <svg class="panzoom-icon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"></path> </svg> </button> </nav> <pre class="mermaid"><code>graph TD
    A[Main Process: ProgressGUI] -- Spawns --&gt; B[Study Process: study_process_wrapper];
    B -- Instantiates --&gt; Study[NearFieldStudy/FarFieldStudy];
    Study -- Uses --&gt; QueueGUI[QueueGUI object];
    QueueGUI -- Puts messages --&gt; C{multiprocessing.Queue};
    C -- Polled by QTimer<br/>every 100ms --&gt; E[QueueHandler];
    E -- Updates GUI --&gt; A;
    E -- Forwards messages --&gt; F[WebGUIBridge];
    F -- HTTP POST<br/>throttled --&gt; G[Monitoring Dashboard<br/>API];
    A -- Updates UI --&gt; D[User];
    G -- Displays status --&gt; H[Web Dashboard];
    
    style C fill:#FFE082
    style E fill:#C5E1A5
    style F fill:#BBDEFB
    style G fill:#E1BEE7
</code></pre> <div class="panzoom-info-box panzoom-info-box-bottom panzoom-hidden"> Hold "Alt" / "Option" to enable pan &amp; zoom </div> </div> <h2 id="2-gui-and-profiling-system">2. <abbr title="Graphical User Interface">GUI</abbr> and profiling system<a class="headerlink" href="#2-gui-and-profiling-system" title="Permanent link">¶</a></h2> <p>The user interface, progress estimation, and timing systems are tightly integrated to provide a responsive and informative experience. The <abbr title="Graphical User Interface">GUI</abbr> architecture is modular, with specialized components handling different aspects of the interface. The core components are the <code>ProgressGUI</code> and the <code>Profiler</code>.</p> <h3 id="the-progressgui">The <code>ProgressGUI</code><a class="headerlink" href="#the-progressgui" title="Permanent link">¶</a></h3> <p>The <abbr title="Graphical User Interface">GUI</abbr> runs in the main process. It uses a <code>QTimer</code> to poll a <code>multiprocessing.Queue</code> for messages sent from the study process. This design keeps the UI responsive. The <abbr title="Graphical User Interface">GUI</abbr> is responsible for two primary progress indicators:</p> <ul> <li><strong>Overall Progress</strong>: Tracks the progress of the entire study (e.g., 5 out of 108 simulations complete).</li> <li><strong>Stage Progress</strong>: Tracks the progress of the current major phase (<code>setup</code>, <code>run</code>, or <code>extract</code>) for the <em>current</em> simulation.</li> </ul> <p>The <abbr title="Graphical User Interface">GUI</abbr> is built using modular components located in <code>goliat/gui/components/</code>:</p> <ul> <li><strong><code>StatusManager</code></strong>: Manages status messages and log display with color-coding.</li> <li><strong><code>DataManager</code></strong>: Handles <abbr title="Comma-Separated Values">CSV</abbr> data files for progress tracking, time series visualization, and system utilization data.</li> <li><strong><code>TimingsTable</code></strong>: Displays execution statistics in a table format.</li> <li><strong><code>PieChartsManager</code></strong>: Generates pie charts showing time breakdown by phase and subtask.</li> <li><strong><code>ProgressAnimation</code></strong>: Manages smooth animations for progress bars during long-running phases.</li> <li><strong><code>TrayManager</code></strong>: Provides system tray integration for background operation.</li> <li><strong><code>QueueHandler</code></strong>: Processes messages from the study process queue and forwards them to the web bridge.</li> <li><strong><code>WebBridgeManager</code></strong>: Manages connection to the web monitoring dashboard, forwards <abbr title="Graphical User Interface">GUI</abbr> messages, and handles screenshot capture.</li> <li><strong><code>UtilizationManager</code></strong>: Updates <abbr title="Central Processing Unit">CPU</abbr>, <abbr title="Random Access Memory">RAM</abbr>, and <abbr title="Graphics Processing Unit">GPU</abbr> utilization displays from system monitoring data.</li> <li><strong><code>SystemMonitor</code></strong>: Provides system resource monitoring (<abbr title="Central Processing Unit">CPU</abbr>, <abbr title="Random Access Memory">RAM</abbr>, <abbr title="Graphics Processing Unit">GPU</abbr>) via psutil and nvidia-smi.</li> <li><strong><code>ScreenshotCapture</code></strong>: Captures <abbr title="Graphical User Interface">GUI</abbr> tab screenshots for remote monitoring via web dashboard.</li> <li><strong><code>UIBuilder</code></strong>: Constructs the window layout and manages UI components.</li> </ul> <h3 id="plot-components">Plot components<a class="headerlink" href="#plot-components" title="Permanent link">¶</a></h3> <p>Plotting functionality is organized into separate classes in <code>goliat/gui/components/plots/</code>:</p> <ul> <li><strong><code>TimeRemainingPlot</code></strong>: Displays time remaining estimates over the course of the study.</li> <li><strong><code>OverallProgressPlot</code></strong>: Shows overall study progress percentage over time.</li> <li><strong><code>SystemUtilizationPlot</code></strong>: Time-series plots for <abbr title="Central Processing Unit">CPU</abbr>, <abbr title="Random Access Memory">RAM</abbr>, <abbr title="Graphics Processing Unit">GPU</abbr> utilization, and <abbr title="Graphics Processing Unit">GPU</abbr> VRAM.</li> <li><strong><code>PieChartsManager</code></strong>: Pie charts showing time breakdown by phase and subtask.</li> </ul> <p>Each plot class manages its own matplotlib figure and canvas, updating independently based on data from the <code>DataManager</code>. Common utilities (like timezone conversion) are centralized in <code>plots/utils.py</code>.</p> <h3 id="the-profiler">The <code>Profiler</code><a class="headerlink" href="#the-profiler" title="Permanent link">¶</a></h3> <p>The <code>Profiler</code> class is the engine for all timing and estimation.</p> <ul> <li><strong>Session-Based Timing</strong>: The profiler maintains a session-specific timing configuration file in the <code>data/</code> folder (e.g., <code>profiling_config_31-10_14-15-30_a1b2c3d4.json</code>). The filename includes a timestamp prefix followed by a unique hash. This file stores the average time taken for each major phase (<code>avg_setup_time</code>, <code>avg_run_time</code>, etc.) and for granular subtasks. The session-specific approach means each study run tracks its own timing data, allowing for cleaner session management and avoiding conflicts between concurrent runs.</li> <li><strong><abbr title="Estimated Time of Arrival">ETA</abbr> Calculation</strong>: The <code>get_time_remaining</code> method provides the core <abbr title="Estimated Time of Arrival">ETA</abbr> logic. It calculates the total estimated time for all simulations based on the current session's timing averages and subtracts the time that has already elapsed. This elapsed time is a combination of the total time for already completed simulations and the real-time duration of the current, in-progress simulation.</li> <li><strong>Weighted Progress</strong>: The <code>Profiler</code> calculates the progress within a single simulation by using phase weights. These weights are derived from the average time of each phase in the current session, normalized to sum to 1. This makes a longer phase, like <code>run</code>, contribute more to the intra-simulation progress than a shorter one, like <code>extract</code>.</li> </ul> <h3 id="the-animation-system">The animation system<a class="headerlink" href="#the-animation-system" title="Permanent link">¶</a></h3> <p>For long-running phases where the underlying process provides no feedback (like <code>iSolve.exe</code>), the <abbr title="Graphical User Interface">GUI</abbr> employs a smooth animation for the <strong>Stage Progress</strong> bar.</p> <p><strong>How it works:</strong></p> <ol> <li> <p><strong>Initiation</strong>: When a major phase (e.g., <code>setup</code>) begins, the <code>profile</code> context manager in the study process retrieves the estimated duration for that entire phase from the <code>Profiler</code> (e.g., <code>avg_setup_time</code>). It sends a <code>start_animation</code> message to the <abbr title="Graphical User Interface">GUI</abbr> with this duration.</p> </li> <li> <p><strong>Animation Execution</strong>: The <code>ProgressGUI</code> receives the message. It resets the stage progress bar to 0% and starts a <code>QTimer</code> that fires every 50ms.</p> </li> <li> <p><strong>Frame-by-Frame Update</strong>: With each tick of the timer, the <code>update_animation</code> method calculates the percentage of the estimated duration that has elapsed and updates the stage progress bar to that value. This creates a smooth animation from 0% to 100% over the expected duration of the phase.</p> </li> <li> <p><strong>Synchronization</strong>: The <code>update_animation</code> method is also responsible for updating the <strong>Overall Progress</strong> bar. On each tick, it asks the <code>Profiler</code> for the current weighted progress of the entire study and updates the overall bar accordingly. This keeps both bars synchronized.</p> </li> <li> <p><strong>Termination</strong>: When the actual phase completes in the study process, an <code>end_animation</code> message is sent. The <abbr title="Graphical User Interface">GUI</abbr> stops the timer and sets the stage progress bar to its final value of 100%, correcting for any deviation between the estimate and the actual time taken.</p> </li> </ol> <p>This system presents the user with a constantly updating and reasonably accurate view of the system's progress, even without direct feedback from the core simulation.</p> <h2 id="3-logging-logging_managerpy">3. Logging (<code>logging_manager.py</code>)<a class="headerlink" href="#3-logging-logging_managerpy" title="Permanent link">¶</a></h2> <p>The system uses Python's standard <code>logging</code> module, configured to provide two distinct streams of information.</p> <h3 id="loggers">Loggers:<a class="headerlink" href="#loggers" title="Permanent link">¶</a></h3> <ol> <li><strong><code>progress</code> logger</strong>: For high-level, user-facing messages. These are shown in the <abbr title="Graphical User Interface">GUI</abbr> and saved to <code>*.progress.log</code>.</li> <li><strong><code>verbose</code> logger</strong>: For detailed, internal messages. These are saved to the main <code>*.log</code> file.</li> </ol> <h3 id="implementation-details">Implementation details:<a class="headerlink" href="#implementation-details" title="Permanent link">¶</a></h3> <ul> <li><strong>Log Rotation</strong>: The <code>setup_loggers</code> function checks the number of log files in the <code>logs</code> directory. If it exceeds a limit (15 pairs), it deletes the oldest pair (<code>.log</code> and <code>.progress.log</code>) to prevent the directory from growing indefinitely.</li> <li><strong>Data File Cleanup</strong>: Similarly, the system automatically manages <abbr title="Comma-Separated Values">CSV</abbr> and <abbr title="JavaScript Object Notation">JSON</abbr> files in the <code>data/</code> directory (progress tracking and profiling files). When more than 50 such files exist, the oldest files are automatically deleted to prevent excessive disk usage. These files follow the naming pattern <code>time_remaining_DD-MM_HH-MM-SS_hash.csv</code>, <code>overall_progress_DD-MM_HH-MM-SS_hash.csv</code>, and <code>profiling_config_DD-MM_HH-MM-SS_hash.json</code>, where the timestamp allows easy identification of when each session was run.</li> <li><strong>Handler Configuration</strong>: The function creates file handlers and stream (console) handlers for each logger, routing messages to the right places. <code>propagate = False</code> is used to prevent messages from being handled by parent loggers, avoiding duplicate output.</li> </ul> <h2 id="4-configuration-configpy">4. Configuration (<code>config.py</code>)<a class="headerlink" href="#4-configuration-configpy" title="Permanent link">¶</a></h2> <p>The <code>Config</code> class uses a powerful inheritance mechanism to avoid duplicating settings.</p> <ul> <li> <p><strong>Inheritance</strong>: A config can "extend" a base config. The <code>_load_config_with_inheritance</code> method recursively loads the base config and merges it with the child config. The child's values override the parent's.</p> <p>For example, <code>near_field_config.json</code> might only specify the settings that differ from the main <code>base_config.json</code>.</p> </li> </ul> <h2 id="5-project-management">5. Project management<a class="headerlink" href="#5-project-management" title="Permanent link">¶</a></h2> <ul> <li><strong><code>project_manager.py</code></strong>: This class is critical for reliability. The underlying <code>.smash</code> project files can become corrupted or locked. The <code>_is_valid_smash_file</code> method is a key defensive measure. It first attempts to rename the file to itself (a trick to check for file locks on Windows) and then uses <code>h5py</code> to ensure the file is a valid <abbr title="Hierarchical Data Format version 5">HDF5</abbr> container before attempting to open it in the simulation software. This prevents the application from crashing on a corrupted file.</li> </ul> <h2 id="6-phantom-rotation-for-by_cheek-placement">6. Phantom rotation for <code>by_cheek</code> placement<a class="headerlink" href="#6-phantom-rotation-for-by_cheek-placement" title="Permanent link">¶</a></h2> <p>A specialized feature for the <code>by_cheek</code> placement scenario is the ability to rotate the phantom to meet the phone, rather than the other way around. This is controlled by a specific dictionary format in the configuration and uses an automatic angle detection algorithm to ensure precise placement.</p> <h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">¶</a></h3> <p>To enable this feature, the orientation in <code>placement_scenarios</code> is defined as a dictionary:</p> <div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nt">"orientations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">  </span><span class="nt">"cheek_base"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="nt">"rotate_phantom_to_cheek"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="nt">"angle_offset_deg"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="p">}</span>
</span></code></pre></div> <ul> <li><code>rotate_phantom_to_cheek</code>: A boolean that enables or disables the phantom rotation.</li> <li><code>angle_offset_deg</code>: An integer that specifies an additional rotation away from the cheek (0 being the default).</li> </ul> <h3 id="automatic-angle-detection">Automatic angle detection<a class="headerlink" href="#automatic-angle-detection" title="Permanent link">¶</a></h3> <p>The system uses a binary search algorithm to find the exact angle at which the phantom's "Skin" entity touches the phone's ground plane. This is handled by the <code>_find_touching_angle</code> method in <code>goliat/setups/near_field_setup.py</code>. The search is performed between 0 and 30 degrees with a precision of 0.5 degrees.</p> <h3 id="workflow-integration">Workflow integration<a class="headerlink" href="#workflow-integration" title="Permanent link">¶</a></h3> <p>The phantom rotation is handled in the <code>NearFieldSetup.run_full_setup</code> method, occurring after the antenna is placed but before the final scene alignment. This keeps the phone positioned correctly relative to the un-rotated phantom, after which the phantom is rotated into the final position. When phantom rotation is enabled, the rotation instruction is removed from the antenna's orientation list to prevent the antenna from being rotated along with the phantom.</p> <h2 id="65-scene-alignment-for-by_cheek-placements">6.5. Scene alignment for <code>by_cheek</code> placements<a class="headerlink" href="#65-scene-alignment-for-by_cheek-placements" title="Permanent link">¶</a></h2> <p>For <code>by_cheek</code> placements, GOLIAT automatically aligns the entire simulation scene with the phone's upright orientation. This optimization aligns the computational grid with the phone's orientation, which can reduce simulation time.</p> <h3 id="how-it-works">How it works<a class="headerlink" href="#how-it-works" title="Permanent link">¶</a></h3> <p>The alignment process occurs after antenna placement and phantom rotation (if enabled). It identifies reference entities on the phone that define its orientation:</p> <ul> <li>For <abbr title="Planar Inverted-F Antenna">PIFA</abbr> antennas: Uses <code>component1:Substrate</code> and <code>component1:Battery</code> as reference points.</li> <li>For <abbr title="Inverted-F Antenna">IFA</abbr> antennas: Uses <code>Ground</code> and <code>Battery</code> as reference points.</li> </ul> <p>The system calculates a transformation matrix that makes the phone upright and applies this transformation to all scene entities:</p> <ul> <li>Phantom group</li> <li>Antenna group</li> <li>Simulation bounding box</li> <li>Antenna bounding box</li> <li>Head and trunk bounding boxes</li> <li>Point sensors</li> </ul> <p>Only parent groups and bounding boxes are transformed, not individual tissue entities, to avoid double transformation. This keeps the entire scene's relative geometry correct while optimizing grid alignment.</p> <h3 id="configuration_1">Configuration<a class="headerlink" href="#configuration_1" title="Permanent link">¶</a></h3> <p>No configuration is required. The alignment is automatically applied for <code>by_cheek</code> placements.</p> <h2 id="7-the-verify-and-resume-caching-system">7. The <code>Verify and Resume</code> caching system<a class="headerlink" href="#7-the-verify-and-resume-caching-system" title="Permanent link">¶</a></h2> <p>GOLIAT integrates a <code>Verify and Resume</code> feature to prevent redundant computations by caching simulation results. The system intelligently determines whether a simulation with an identical configuration has already been successfully completed, skipping re-runs and saving significant time.</p> <h3 id="verification-workflow">Verification workflow<a class="headerlink" href="#verification-workflow" title="Permanent link">¶</a></h3> <p>The verification logic is multi-tiered, prioritizing the integrity of the final result files ("deliverables") over simple metadata flags. This maintains robustness against interrupted runs or manual file deletions.</p> <ol> <li> <p><strong>Configuration hashing</strong>: Before verification, a "surgical" configuration is created. This is a snapshot containing only the parameters relevant to a single, specific simulation run (e.g., one phantom, one frequency, one placement). This configuration is then serialized and hashed (SHA256), producing a unique fingerprint that represents the exact setup.</p> </li> <li> <p><strong>Metadata and deliverable validation</strong>: The core logic resides in <code>ProjectManager.create_or_open_project</code>, which is called at the start of each simulation. It performs a sequence of checks:</p> <ul> <li><strong>Hash comparison</strong>: The hash of the current surgical configuration is compared against the <code>config_hash</code> stored in the <code>config.json</code> metadata file within the simulation's results directory. A mismatch signifies that the configuration has changed, rendering the cached results invalid and triggering a full re-run.</li> <li><strong><code>.smash</code> file integrity</strong>: If the hashes match, the system validates the <code>.smash</code> project file itself. This is a critical step for stability, as these files can become locked or corrupted. The validation involves checking for <code>.s4l_lock</code> files and verifying the <abbr title="Hierarchical Data Format version 5">HDF5</abbr> structure with <code>h5py</code>. A missing or corrupt <code>.smash</code> file indicates that the setup phase is incomplete.</li> <li><strong>Deliverable verification</strong>: This is the definitive check. The system looks for the actual output files generated by the <code>run</code> and <code>extract</code> phases. It verifies their existence and that their modification timestamps are newer than the <code>setup_timestamp</code> recorded in the metadata.<ul> <li><strong>Run phase deliverables</strong>: A valid <code>*_Output.h5</code> file.</li> <li><strong>Extract phase deliverables</strong>: <code>sar_results.json</code>, <code>sar_stats_all_tissues.pkl</code>, and <code>sar_stats_all_tissues.html</code>.</li> </ul> </li> </ul> </li> <li> <p><strong>Status reporting and phase skipping</strong>: The verification process returns a detailed status dictionary, such as <code>{'setup_done': True, 'run_done': True, 'extract_done': False}</code>. The study orchestrator (<code>NearFieldStudy</code> or <code>FarFieldStudy</code>) uses this status to dynamically skip phases that are already complete. For instance, if <code>run_done</code> is <code>True</code>, the <code>do_run</code> flag for that specific simulation is internally set to <code>False</code>, and the run phase is skipped.</p> </li> <li> <p><strong>Metadata update</strong>: Upon the successful completion of the <code>run</code> and <code>extract</code> phases, the <code>BaseStudy._verify_and_update_metadata</code> method is triggered. It re-confirms that the deliverables exist on the file system and then updates the <code>run_done</code> or <code>extract_done</code> flags in the <code>config.json</code> file to <code>true</code>. This keeps the metadata accurately reflecting the state of the deliverables for future runs.</p> </li> </ol> <p>This deliverable-first approach is a key design choice. It guarantees that the system is resilient; even if the metadata file claims a phase is complete, the absence of the actual result files will correctly force the system to re-run the necessary steps.</p> <h3 id="overriding-the-cache">Overriding the cache<a class="headerlink" href="#overriding-the-cache" title="Permanent link">¶</a></h3> <p>The entire caching and verification mechanism can be bypassed using the <code>--no-cache</code> command-line flag.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>goliat<span class="w"> </span>study<span class="w"> </span>my_study.json<span class="w"> </span>--no-cache
</span></code></pre></div> <p>When this flag is active, GOLIAT will ignore any existing project files or metadata. It skips the verification process, deletes any existing <code>.smash</code> file for the target simulation, and executes all phases (setup, run, extract) from a clean state. This is useful for debugging configuration issues, validating code changes, or when a fresh run is explicitly required.</p> <p>The <code>--no-cache</code> flag can also be used when you need to ensure that cached results from a previous configuration are not reused, even if the current configuration appears identical.</p> <h2 id="8-web-monitoring-dashboard-integration">8. Web monitoring dashboard integration<a class="headerlink" href="#8-web-monitoring-dashboard-integration" title="Permanent link">¶</a></h2> <p>GOLIAT supports remote monitoring through a web dashboard. Monitor multiple worker machines from one interface, track progress across distributed studies, and view real-time logs and system information.</p> <h3 id="architecture-overview">Architecture overview<a class="headerlink" href="#architecture-overview" title="Permanent link">¶</a></h3> <p>The web monitoring system uses a bridge pattern to forward <abbr title="Graphical User Interface">GUI</abbr> messages to a remote dashboard <abbr title="Application Programming Interface">API</abbr> without interfering with local <abbr title="Graphical User Interface">GUI</abbr> operation. The architecture consists of four components:</p> <ul> <li> <p><strong><code>QueueHandler</code></strong>: Processes messages from the study process queue. After updating the local <abbr title="Graphical User Interface">GUI</abbr>, forwards a copy of each message to the web bridge (if enabled).</p> </li> <li> <p><strong><code>WebBridgeManager</code></strong>: Manages the web bridge connection lifecycle. Initializes the bridge, collects system information (<abbr title="Graphics Processing Unit">GPU</abbr>, <abbr title="Central Processing Unit">CPU</abbr>, <abbr title="Random Access Memory">RAM</abbr>, hostname), and handles connection status updates.</p> </li> <li> <p><strong><code>WebGUIBridge</code></strong>: Core bridge component that forwards messages to the dashboard <abbr title="Application Programming Interface">API</abbr>. Uses an internal queue to decouple from the multiprocessing queue and implements message throttling to prevent <abbr title="Application Programming Interface">API</abbr> overload.</p> </li> <li> <p><strong><code>HTTPClient</code></strong>: Handles HTTP requests to the dashboard <abbr title="Application Programming Interface">API</abbr> endpoints (<code>/api/gui-update</code> and <code>/api/heartbeat</code>).</p> </li> </ul> <h3 id="message-flow">Message flow<a class="headerlink" href="#message-flow" title="Permanent link">¶</a></h3> <p>Messages flow from the study process to the web dashboard through this path:</p> <div class="panzoom-box" data-key="alt" id="panzoom0" oncontextmenu="return false;"> <nav class="panzoom-nav"> <button class="panzoom-info panzoom-button"> <svg class="panzoom-icon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path> </svg> </button><button class="panzoom-reset panzoom-button"> <svg class="panzoom-icon" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"></path> </svg> </button> </nav> <pre class="mermaid"><code>sequenceDiagram
    participant Study as Study Process
    participant Queue as multiprocessing.Queue
    participant Handler as QueueHandler
    participant GUI as ProgressGUI
    participant Bridge as WebGUIBridge
    participant API as Dashboard API
    participant Dashboard as Web Dashboard
    
    Study-&gt;&gt;Queue: Put message (status, progress, etc.)
    Queue-&gt;&gt;Handler: Poll (every 100ms)
    Handler-&gt;&gt;GUI: Update local UI
    Handler-&gt;&gt;Bridge: Enqueue message copy
    Bridge-&gt;&gt;Bridge: Throttle &amp; batch
    Bridge-&gt;&gt;API: HTTP POST /api/gui-update
    API-&gt;&gt;Dashboard: Update worker state
    Bridge-&gt;&gt;Bridge: Send heartbeat (every 30s)
    Bridge-&gt;&gt;API: HTTP POST /api/heartbeat
</code></pre> <div class="panzoom-info-box panzoom-info-box-bottom panzoom-hidden"> Hold "Alt" / "Option" to enable pan &amp; zoom </div> </div> <h3 id="message-types-and-handling">Message types and handling<a class="headerlink" href="#message-types-and-handling" title="Permanent link">¶</a></h3> <p>The <code>QueueHandler</code> processes several message types, each forwarded to the web bridge (with appropriate sanitization):</p> <ul> <li><code>status</code>: Log messages with color coding. Batched together (up to 20 messages per batch, sent every 300ms) for efficiency.</li> <li><code>overall_progress</code>: Overall study progress (e.g., 5 out of 108 simulations). Sent immediately with throttling (up to 50 <abbr title="Hertz">Hz</abbr>).</li> <li><code>stage_progress</code>: Progress within the current phase (setup/run/extract). Sent immediately with throttling.</li> <li><code>profiler_update</code>: <abbr title="Estimated Time of Arrival">ETA</abbr> and timing information. The profiler object is sanitized to extract only serializable data (e.g., <code>eta_seconds</code>).</li> <li><code>finished</code>: Study completion notification.</li> <li><code>fatal_error</code>: Fatal error notification.</li> </ul> <h3 id="throttling-and-batching">Throttling and batching<a class="headerlink" href="#throttling-and-batching" title="Permanent link">¶</a></h3> <p>The <code>WebGUIBridge</code> throttles messages to prevent <abbr title="Application Programming Interface">API</abbr> overload:</p> <ul> <li>Progress updates (<code>overall_progress</code>, <code>stage_progress</code>, <code>profiler_update</code>): Sent immediately but throttled to 50 <abbr title="Hertz">Hz</abbr> (20ms minimum interval).</li> <li>Log messages (<code>status</code>): Batched together and sent every 300ms, or immediately if the batch reaches 20 messages.</li> <li>Heartbeats: Sent every 30 seconds to maintain worker registration and update connection status.</li> </ul> <h3 id="connection-management">Connection management<a class="headerlink" href="#connection-management" title="Permanent link">¶</a></h3> <p>The web bridge maintains connection state and provides feedback to the <abbr title="Graphical User Interface">GUI</abbr>:</p> <ul> <li>Connection callback: The bridge calls <code>ProgressGUI._update_web_status</code> whenever the connection status changes. Updates a visual indicator (green dot for connected, red dot for disconnected) in the <abbr title="Graphical User Interface">GUI</abbr>.</li> <li>Graceful degradation: If the dashboard is unavailable or the <code>requests</code> library is not installed, the <abbr title="Graphical User Interface">GUI</abbr> continues to function normally. Messages are silently dropped (not queued) to prevent memory buildup.</li> <li>System information: On initialization, the bridge collects and sends system information (<abbr title="Graphics Processing Unit">GPU</abbr> model, <abbr title="Central Processing Unit">CPU</abbr> cores, <abbr title="Random Access Memory">RAM</abbr> capacity, hostname) with the initial heartbeat. This information is displayed on the web dashboard.</li> </ul> <h3 id="worker-identification">Worker identification<a class="headerlink" href="#worker-identification" title="Permanent link">¶</a></h3> <p>Workers are identified by their IP address (or local IP if no public IP is available). The dashboard handles IP changes (e.g., VPN reconnections) by matching workers by hostname and transferring running assignments to the new worker session.</p> <h3 id="api-endpoints"><abbr title="Application Programming Interface">API</abbr> endpoints<a class="headerlink" href="#api-endpoints" title="Permanent link">¶</a></h3> <p>The web bridge communicates with two <abbr title="Application Programming Interface">API</abbr> endpoints:</p> <ul> <li><code>POST /api/gui-update</code>: Sends <abbr title="Graphical User Interface">GUI</abbr> state updates (progress, logs, status). Payload includes <code>machineId</code>, <code>message</code>, and <code>timestamp</code>.</li> <li><code>POST /api/heartbeat</code>: Registers or updates worker status and sends system information. Called automatically every 30 seconds.</li> </ul> <h3 id="initialization">Initialization<a class="headerlink" href="#initialization" title="Permanent link">¶</a></h3> <p>The web bridge initializes automatically when:</p> <ul> <li>The <code>requests</code> library is installed (<code>pip install requests</code>).</li> <li>A machine ID can be detected (public IP or local IP).</li> <li>The dashboard URL is accessible (default: <code>https://goliat.waves-ugent.be</code>).</li> </ul> <p>No configuration is required. The <abbr title="Graphical User Interface">GUI</abbr> shows a connection status indicator to inform users whether web monitoring is active.</p> <h3 id="error-handling">Error handling<a class="headerlink" href="#error-handling" title="Permanent link">¶</a></h3> <p>The web bridge handles errors gracefully:</p> <ul> <li>Network errors: Connection timeouts and errors are logged but do not affect <abbr title="Graphical User Interface">GUI</abbr> operation.</li> <li>Message serialization: Non-serializable objects (like the <code>Profiler</code> instance) are sanitized before sending.</li> <li>Thread safety: HTTP requests are executed in a thread pool to avoid blocking the <abbr title="Graphical User Interface">GUI</abbr> thread.</li> </ul> <p>For more information about using the monitoring dashboard, see the <a href="../../cloud/monitoring/">Monitoring Dashboard documentation</a>.</p> <h2 id="9-system-utilization-monitoring">9. System utilization monitoring<a class="headerlink" href="#9-system-utilization-monitoring" title="Permanent link">¶</a></h2> <p>The <abbr title="Graphical User Interface">GUI</abbr> includes real-time system resource monitoring to track <abbr title="Central Processing Unit">CPU</abbr>, <abbr title="Random Access Memory">RAM</abbr>, <abbr title="Graphics Processing Unit">GPU</abbr> utilization, and <abbr title="Graphics Processing Unit">GPU</abbr> VRAM usage during simulations. This helps identify bottlenecks and optimize performance.</p> <h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">¶</a></h3> <p>System monitoring uses two components:</p> <ul> <li><strong><code>SystemMonitor</code></strong>: Provides low-level system resource queries using <code>psutil</code> for <abbr title="Central Processing Unit">CPU</abbr>/<abbr title="Random Access Memory">RAM</abbr> and <code>nvidia-smi</code> for <abbr title="Graphics Processing Unit">GPU</abbr> metrics. Handles missing dependencies gracefully (returns 0.0 or None if unavailable).</li> <li><strong><code>UtilizationManager</code></strong>: Updates <abbr title="Graphical User Interface">GUI</abbr> progress bars and labels with current utilization values. Called every second by a Qt timer.</li> </ul> <h3 id="metrics-tracked">Metrics tracked<a class="headerlink" href="#metrics-tracked" title="Permanent link">¶</a></h3> <ul> <li><strong><abbr title="Central Processing Unit">CPU</abbr> utilization</strong>: Percentage (0-100) using non-blocking <code>psutil.cpu_percent()</code> calls</li> <li><strong><abbr title="Random Access Memory">RAM</abbr> utilization</strong>: Used and total <abbr title="Gigabyte">GB</abbr>, plus percentage with/without cacheable memory</li> <li><strong><abbr title="Graphics Processing Unit">GPU</abbr> utilization</strong>: Percentage (0-100) via <code>nvidia-smi</code> queries</li> <li><strong><abbr title="Graphics Processing Unit">GPU</abbr> VRAM</strong>: Used and total <abbr title="Gigabyte">GB</abbr>, plus percentage utilization</li> </ul> <h3 id="data-collection-and-export">Data collection and export<a class="headerlink" href="#data-collection-and-export" title="Permanent link">¶</a></h3> <p>Utilization data is written to <abbr title="Comma-Separated Values">CSV</abbr> files (<code>system_utilization_DD-MM_HH-MM-SS_hash.csv</code>) for analysis and plotting. The <abbr title="Graphical User Interface">GUI</abbr> includes a dedicated "System Utilization" tab with time-series plots showing all metrics over the simulation duration.</p> <h3 id="update-frequency">Update frequency<a class="headerlink" href="#update-frequency" title="Permanent link">¶</a></h3> <ul> <li>Progress bars: Updated every 1 second via <code>UtilizationManager.update()</code></li> <li><abbr title="Comma-Separated Values">CSV</abbr> data: Written every 2 seconds (via <code>GraphManager</code> timer)</li> <li>Plot updates: Refreshed every 5 seconds</li> </ul> <p>The monitoring system gracefully handles missing <abbr title="Graphics Processing Unit">GPU</abbr> drivers or unavailable hardware, continuing to track <abbr title="Central Processing Unit">CPU</abbr> and <abbr title="Random Access Memory">RAM</abbr> even when <abbr title="Graphics Processing Unit">GPU</abbr> data isn't available.</p> <h2 id="10-gui-screenshot-streaming">10. <abbr title="Graphical User Interface">GUI</abbr> screenshot streaming<a class="headerlink" href="#10-gui-screenshot-streaming" title="Permanent link">¶</a></h2> <p>For remote monitoring scenarios (cloud deployments, distributed workers), GOLIAT streams <abbr title="Graphical User Interface">GUI</abbr> screenshots to the web dashboard, enabling visual monitoring of simulation progress without direct access to the worker machine.</p> <h3 id="architecture_1">Architecture<a class="headerlink" href="#architecture_1" title="Permanent link">¶</a></h3> <p>Screenshot capture is handled by two components:</p> <ul> <li><strong><code>ScreenshotCapture</code></strong>: Captures all <abbr title="Graphical User Interface">GUI</abbr> tabs as JPEG images using Qt's <code>render()</code> method. Excludes the Progress tab (data sent separately via web bridge).</li> <li><strong><code>WebBridgeManager</code></strong>: Manages screenshot capture timer (1 FPS) and forwards screenshots to the web bridge.</li> </ul> <h3 id="capture-process">Capture process<a class="headerlink" href="#capture-process" title="Permanent link">¶</a></h3> <ol> <li><strong>Timer initialization</strong>: A Qt timer fires every 1 second (1 FPS) to capture screenshots</li> <li><strong>Tab rendering</strong>: Each visible tab is rendered to a QPixmap using <code>render()</code> without switching tabs (avoids <abbr title="Graphical User Interface">GUI</abbr> jumping)</li> <li><strong>Compression</strong>: Screenshots are compressed to JPEG format (95% quality) to reduce bandwidth</li> <li><strong>Asynchronous upload</strong>: Screenshots are enqueued to the web bridge and sent via HTTP POST to <code>/api/gui-screenshots</code></li> </ol> <h3 id="screenshot-format">Screenshot format<a class="headerlink" href="#screenshot-format" title="Permanent link">¶</a></h3> <p>Screenshots are sent as multipart/form-data with: - Each tab as a separate file field (tab name sanitized for form field names) - <code>machineId</code> included as form data - JPEG format with 95% quality for balance between quality and file size</p> <h3 id="error-handling_1">Error handling<a class="headerlink" href="#error-handling_1" title="Permanent link">¶</a></h3> <p>Screenshot capture failures don't affect <abbr title="Graphical User Interface">GUI</abbr> operation. Errors are logged but don't interrupt the simulation or <abbr title="Graphical User Interface">GUI</abbr> updates. If screenshot capture isn't available (missing dependencies, initialization failures), the <abbr title="Graphical User Interface">GUI</abbr> continues normally without screenshots.</p> <h3 id="dashboard-integration">Dashboard integration<a class="headerlink" href="#dashboard-integration" title="Permanent link">¶</a></h3> <p>The web dashboard displays screenshots for each worker, allowing remote monitoring of: - Progress tab (via data, not screenshot) - System Utilization tab - Timings tab - Logs tab - Plots tab - Settings tab</p> <p>Screenshots are stored on the dashboard server and served via <abbr title="Application Programming Interface">API</abbr> endpoints (<code>/api/gui-screenshots/[workerId]/[tabName]</code>).</p> <p>For a complete reference of all features mentioned here and more, see the <a href="../../reference/full_features_list/">Full List of Features</a>.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-footer-content-wrapper"> <div class="md-footer-nav-left"> <a aria-label="Previous" class="md-footer__link md-footer__link--prev" href="../analysis/"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class="md-footer__title"> <div class="md-ellipsis"> <span class="md-footer__direction"> Previous </span> Analysis </div> </div> </a> </div> <div class="md-footer-custom"> <div class="footer-logos"> <a class="footer-logo-link" href="https://waves.ugent.be" rel="noopener noreferrer" target="_blank"> <img alt="WAVES" class="footer-logo waves-logo" src="../../img/waves.svg"/> </a> <a class="footer-logo-link" href="https://www.ugent.be" rel="noopener noreferrer" target="_blank"> <img alt="UGent" class="footer-logo ugent-logo" src="../../img/ugent.png"/> </a> <a class="footer-logo-link" href="https://www.imec-int.com" rel="noopener noreferrer" target="_blank"> <img alt="imec" class="footer-logo imec-logo" src="../../img/imec.png"/> </a> </div> <div class="footer-monitoring"> <a class="monitoring-link" href="https://monitor.goliat.waves-ugent.be" rel="noopener noreferrer" target="_blank"> 📊 Check out the monitoring dashboard at monitor.goliat.waves-ugent.be </a> </div> </div> <div class="md-footer-nav-right"> <a aria-label="Next" class="md-footer__link md-footer__link--next" href="../configuration/"> <div class="md-footer__title"> <div class="md-ellipsis"> <span class="md-footer__direction"> Next </span> Configuration </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-progress" data-md-component="progress" role="progressbar"></div> <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script> <script src="../../javascripts/ansi-to-html.js"></script> <script src="../../javascripts/footer-width-match.js"></script> <script src="../../javascripts/code-block-enhancements.js"></script> <script src="../../assets/javascripts/panzoom.min.js"></script> <script src="../../assets/javascripts/zoompan.js"></script> <script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body> </html>