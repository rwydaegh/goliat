<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Automated Python framework for near-field and far-field dosimetric assessments using Sim4Life"><meta name=author content=rwydaegh><link href=https://rwydaegh.github.io/goliat/advanced_features/ rel=canonical><link href=../technical_guide/ rel=prev><link href=../configuration/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>Advanced Features - GOLIAT Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#advanced-features-a-deeper-dive class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="GOLIAT Documentation" class="md-header__button md-logo" aria-label="GOLIAT Documentation" data-md-component=logo> <img src=../img/goliat.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> GOLIAT Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Advanced Features </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rwydaegh/goliat title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> rwydaegh/goliat </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../quick_start/ class=md-tabs__link> Quick Start </a> </li> <li class=md-tabs__item> <a href=../user_guide/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../tutorials/basic/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../developer_guide/ class=md-tabs__link> Developer Guide </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../technical_guide/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../troubleshooting/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../project_info/ class=md-tabs__link> Project Info </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="GOLIAT Documentation" class="md-nav__button md-logo" aria-label="GOLIAT Documentation" data-md-component=logo> <img src=../img/goliat.svg alt=logo> </a> GOLIAT Documentation </label> <div class=md-nav__source> <a href=https://github.com/rwydaegh/goliat title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> rwydaegh/goliat </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../quick_start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../user_guide/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tutorials/basic/ class=md-nav__link> <span class=md-ellipsis> Basic </span> </a> </li> <li class=md-nav__item> <a href=../tutorials/intermediate/ class=md-nav__link> <span class=md-ellipsis> Intermediate </span> </a> </li> <li class=md-nav__item> <a href=../tutorials/advanced/ class=md-nav__link> <span class=md-ellipsis> Advanced </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../developer_guide/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../coloring_rules.md class=md-nav__link> <span class=md-ellipsis> Coloring Rules </span> </a> </li> <li class=md-nav__item> <a href=../uml/ class=md-nav__link> <span class=md-ellipsis> UML </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../technical_guide/ class=md-nav__link> <span class=md-ellipsis> Technical Guide </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Advanced Features </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Advanced Features </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-high-level-workflow class=md-nav__link> <span class=md-ellipsis> 1. High-level workflow </span> </a> </li> <li class=md-nav__item> <a href=#2-gui-gui_managerpy class=md-nav__link> <span class=md-ellipsis> 2. GUI (gui_manager.py) </span> </a> <nav class=md-nav aria-label="2. GUI (gui_manager.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#message-processing class=md-nav__link> <span class=md-ellipsis> Message processing </span> </a> </li> <li class=md-nav__item> <a href=#the-animation-system-a-closer-look class=md-nav__link> <span class=md-ellipsis> The animation system: a closer look </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-logging-logging_managerpy class=md-nav__link> <span class=md-ellipsis> 3. Logging (logging_manager.py) </span> </a> <nav class=md-nav aria-label="3. Logging (logging_manager.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#loggers class=md-nav__link> <span class=md-ellipsis> Loggers: </span> </a> </li> <li class=md-nav__item> <a href=#implementation-details class=md-nav__link> <span class=md-ellipsis> Implementation details: </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-profiling-and-timing-utilspy-profiling_configjson class=md-nav__link> <span class=md-ellipsis> 4. Profiling and timing (utils.py, profiling_config.json) </span> </a> <nav class=md-nav aria-label="4. Profiling and timing (utils.py, profiling_config.json)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-concepts class=md-nav__link> <span class=md-ellipsis> Key concepts: </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-configuration-configpy class=md-nav__link> <span class=md-ellipsis> 5. Configuration (config.py) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../api_reference/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../project_info/ class=md-nav__link> <span class=md-ellipsis> Project Info </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/rwydaegh/goliat/edit/master/docs/advanced_features.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <a href=https://github.com/rwydaegh/goliat/raw/master/docs/advanced_features.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg> </a> <h1 id=advanced-features-a-deeper-dive>Advanced Features: A Deeper Dive<a class=headerlink href=#advanced-features-a-deeper-dive title="Permanent link">&para;</a></h1> <p>This section details the architecture and workflow of the key operational features of the codebase, focusing on the graphical user interface (GUI), logging, session management, and the profiling/timing system.</p> <h2 id=1-high-level-workflow>1. High-level workflow<a class=headerlink href=#1-high-level-workflow title="Permanent link">&para;</a></h2> <p>The application is designed to run scientific studies (e.g., Near-Field, Far-Field) which can be time-consuming. To provide user feedback and manage complexity, the system employs a multi-process architecture.</p> <ol> <li><strong>Main Process</strong>: A lightweight PySide6 GUI (<code>ProgressGUI</code>) is launched. This GUI is responsible for displaying progress, logs, and timing information.</li> <li><strong>Study Process</strong>: The actual study (<code>NearFieldStudy</code> or <code>FarFieldStudy</code>) is executed in a separate process using Python's <code>multiprocessing</code> module. This prevents the GUI from freezing during intensive calculations.</li> <li><strong>Communication</strong>: The study process communicates with the GUI process through a <code>multiprocessing.Queue</code>. It sends messages containing status updates, progress information, and timing data.</li> </ol> <p>The entry point for the study process is the <code>study_process_wrapper</code> function, which sets up a special <code>QueueGUI</code> object. This object mimics the real GUI's interface but directs all its output to the shared queue.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># from src/gui_manager.py</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=k>def</span><span class=w> </span><span class=nf>study_process_wrapper</span><span class=p>(</span><span class=n>queue</span><span class=p>,</span> <span class=n>study_type</span><span class=p>,</span> <span class=n>config_filename</span><span class=p>,</span> <span class=n>verbose</span><span class=p>,</span> <span class=n>session_timestamp</span><span class=p>,</span> <span class=n>execution_control</span><span class=p>):</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=sd>    This function runs in a separate process and executes the study.</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=sd>    It communicates with the main GUI process via a queue.</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=c1># ... setup ...</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=k>class</span><span class=w> </span><span class=nc>QueueGUI</span><span class=p>:</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>        <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>queue</span><span class=p>):</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>            <span class=bp>self</span><span class=o>.</span><span class=n>queue</span> <span class=o>=</span> <span class=n>queue</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>            <span class=bp>self</span><span class=o>.</span><span class=n>profiler</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>        <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>level</span><span class=o>=</span><span class=s1>&#39;verbose&#39;</span><span class=p>):</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>            <span class=k>if</span> <span class=n>level</span> <span class=o>==</span> <span class=s1>&#39;progress&#39;</span><span class=p>:</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>                <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=o>.</span><span class=n>put</span><span class=p>({</span><span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;status&#39;</span><span class=p>,</span> <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=n>message</span><span class=p>})</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>        <span class=k>def</span><span class=w> </span><span class=nf>update_overall_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>current_step</span><span class=p>,</span> <span class=n>total_steps</span><span class=p>):</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>            <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=o>.</span><span class=n>put</span><span class=p>({</span><span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;overall_progress&#39;</span><span class=p>,</span> <span class=s1>&#39;current&#39;</span><span class=p>:</span> <span class=n>current_step</span><span class=p>,</span> <span class=s1>&#39;total&#39;</span><span class=p>:</span> <span class=n>total_steps</span><span class=p>})</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>        <span class=c1># ... other methods ...</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>    <span class=k>if</span> <span class=n>study_type</span> <span class=o>==</span> <span class=s1>&#39;near_field&#39;</span><span class=p>:</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>        <span class=n>study</span> <span class=o>=</span> <span class=n>NearFieldStudy</span><span class=p>(</span><span class=n>config_filename</span><span class=o>=</span><span class=n>config_filename</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=n>verbose</span><span class=p>,</span> <span class=n>gui</span><span class=o>=</span><span class=n>QueueGUI</span><span class=p>(</span><span class=n>queue</span><span class=p>))</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>    <span class=c1># ...</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>    <span class=n>study</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>    <span class=n>queue</span><span class=o>.</span><span class=n>put</span><span class=p>({</span><span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;finished&#39;</span><span class=p>})</span>
</span></code></pre></div> <pre class=mermaid><code>graph TD
    A[Main Process: ProgressGUI] -- Spawns --&gt; B[Study Process: study_process_wrapper];
    B -- Instantiates --&gt; Study[NearFieldStudy/FarFieldStudy];
    Study -- Uses --&gt; QueueGUI[QueueGUI object];
    QueueGUI -- Puts messages --&gt; C{multiprocessing.Queue};
    C -- Polled by QTimer --&gt; A;
    A -- Updates UI --&gt; D[User];</code></pre> <h2 id=2-gui-gui_managerpy>2. GUI (<code>gui_manager.py</code>)<a class=headerlink href=#2-gui-gui_managerpy title="Permanent link">&para;</a></h2> <p>The GUI provides a real-time view of the study's progress. It runs in the main process and is designed to be responsive, even while the heavy computation happens elsewhere.</p> <h3 id=message-processing>Message processing<a class=headerlink href=#message-processing title="Permanent link">&para;</a></h3> <p>The <code>ProgressGUI</code> uses a <code>QTimer</code> that fires every 100ms, calling the <code>process_queue</code> method. This method drains the queue of any pending messages from the study process and updates the UI accordingly.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># from src/gui_manager.py</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=k>class</span><span class=w> </span><span class=nc>ProgressGUI</span><span class=p>(</span><span class=n>QWidget</span><span class=p>):</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=c1># ...</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>process_queue</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>        <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>                <span class=n>msg</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=o>.</span><span class=n>get_nowait</span><span class=p>()</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>                <span class=n>msg_type</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;type&#39;</span><span class=p>)</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>                <span class=k>if</span> <span class=n>msg_type</span> <span class=o>==</span> <span class=s1>&#39;status&#39;</span><span class=p>:</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>update_status</span><span class=p>(</span><span class=n>msg</span><span class=p>[</span><span class=s1>&#39;message&#39;</span><span class=p>])</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>                <span class=k>elif</span> <span class=n>msg_type</span> <span class=o>==</span> <span class=s1>&#39;overall_progress&#39;</span><span class=p>:</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>update_overall_progress</span><span class=p>(</span><span class=n>msg</span><span class=p>[</span><span class=s1>&#39;current&#39;</span><span class=p>],</span> <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;total&#39;</span><span class=p>])</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>                <span class=k>elif</span> <span class=n>msg_type</span> <span class=o>==</span> <span class=s1>&#39;stage_progress&#39;</span><span class=p>:</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>update_stage_progress</span><span class=p>(</span><span class=n>msg</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>],</span> <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;current&#39;</span><span class=p>],</span> <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;total&#39;</span><span class=p>])</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>                <span class=k>elif</span> <span class=n>msg_type</span> <span class=o>==</span> <span class=s1>&#39;start_animation&#39;</span><span class=p>:</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>start_stage_animation</span><span class=p>(</span><span class=n>msg</span><span class=p>[</span><span class=s1>&#39;estimate&#39;</span><span class=p>],</span> <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;end_value&#39;</span><span class=p>])</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>                <span class=c1># ... other message types ...</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>            <span class=k>except</span> <span class=n>Empty</span><span class=p>:</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>                <span class=k>break</span>
</span></code></pre></div> <h3 id=the-animation-system-a-closer-look>The animation system: a closer look<a class=headerlink href=#the-animation-system-a-closer-look title="Permanent link">&para;</a></h3> <p>A key feature for user experience is the smooth animation of the stage progress bar. This is used for tasks where the simulation software doesn't provide real-time progress feedback, but we have a historical estimate of how long it should take.</p> <p><strong>How it works:</strong></p> <ol> <li> <p><strong>Initiation</strong>: The study process, before starting a long-running subtask (like <code>run_simulation_total</code>), gets an estimated duration from the <code>Profiler</code>. It then sends a <code>start_animation</code> message to the GUI, containing this estimated duration. <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># from src/studies/far_field_study.py (conceptual)</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=k>def</span><span class=w> </span><span class=nf>run_simulations</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>    <span class=c1># ...</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>gui</span><span class=p>:</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>        <span class=c1># Tell the GUI to start an animation for the next step</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>        <span class=bp>self</span><span class=o>.</span><span class=n>gui</span><span class=o>.</span><span class=n>start_stage_animation</span><span class=p>(</span><span class=s2>&quot;run_simulation_total&quot;</span><span class=p>,</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>    <span class=bp>self</span><span class=o>.</span><span class=n>simulation_runner</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>sim</span><span class=p>)</span>
</span></code></pre></div> The <code>QueueGUI</code> object in the study process gets the estimate from its profiler instance and puts the message on the queue. <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># from src/gui_manager.py</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=k>class</span><span class=w> </span><span class=nc>QueueGUI</span><span class=p>:</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=c1># ...</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>start_stage_animation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>end_value</span><span class=p>):</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>        <span class=n>estimate</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>profiler</span><span class=o>.</span><span class=n>get_subtask_estimate</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>        <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=o>.</span><span class=n>put</span><span class=p>({</span><span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;start_animation&#39;</span><span class=p>,</span> <span class=s1>&#39;estimate&#39;</span><span class=p>:</span> <span class=n>estimate</span><span class=p>,</span> <span class=s1>&#39;end_value&#39;</span><span class=p>:</span> <span class=n>end_value</span><span class=p>})</span>
</span></code></pre></div></p> </li> <li> <p><strong>Animation Setup</strong>: When the <code>ProgressGUI</code> receives the <code>start_animation</code> message, it sets up the animation parameters. It records the <code>start_time</code>, the <code>duration</code> (from the profiler's estimate), the progress bar's <code>start_value</code>, and the <code>end_value</code> it needs to reach. <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># from src/gui_manager.py</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=k>def</span><span class=w> </span><span class=nf>start_stage_animation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>estimated_duration</span><span class=p>,</span> <span class=n>end_step</span><span class=p>):</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=bp>self</span><span class=o>.</span><span class=n>animation_start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=bp>self</span><span class=o>.</span><span class=n>animation_duration</span> <span class=o>=</span> <span class=n>estimated_duration</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=bp>self</span><span class=o>.</span><span class=n>animation_start_value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>stage_progress_bar</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=c1># ... calculate animation_end_value based on end_step ...</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>    <span class=bp>self</span><span class=o>.</span><span class=n>animation_active</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_timer</span><span class=o>.</span><span class=n>isActive</span><span class=p>():</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>        <span class=bp>self</span><span class=o>.</span><span class=n>animation_timer</span><span class=o>.</span><span class=n>start</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span> <span class=c1># Start the animation timer (50ms interval)</span>
</span></code></pre></div></p> </li> <li> <p><strong>Frame-by-Frame Update</strong>: A dedicated <code>QTimer</code> (<code>animation_timer</code>) calls the <code>update_animation</code> method every 50ms. This method calculates how much time has passed since the animation started, determines the corresponding progress percentage, and updates the progress bar's value. This creates the smooth visual effect. <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># from src/gui_manager.py</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=k>def</span><span class=w> </span><span class=nf>update_animation</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_active</span><span class=p>:</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>        <span class=k>return</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>    <span class=n>elapsed</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_start_time</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_duration</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>        <span class=n>progress_ratio</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>elapsed</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_duration</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>        <span class=n>progress_ratio</span> <span class=o>=</span> <span class=mf>1.0</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=n>value_range</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_end_value</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_start_value</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>    <span class=n>current_value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>animation_start_value</span> <span class=o>+</span> <span class=nb>int</span><span class=p>(</span><span class=n>value_range</span> <span class=o>*</span> <span class=n>progress_ratio</span><span class=p>)</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>    <span class=bp>self</span><span class=o>.</span><span class=n>stage_progress_bar</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>current_value</span><span class=p>)</span>
</span></code></pre></div></p> </li> <li> <p><strong>Termination</strong>: Once the actual task is complete in the study process, it sends an <code>end_animation</code> message. This stops the animation timer and sets the progress bar to its final, accurate value, correcting for any deviation between the estimate and the actual time taken.</p> </li> </ol> <h2 id=3-logging-logging_managerpy>3. Logging (<code>logging_manager.py</code>)<a class=headerlink href=#3-logging-logging_managerpy title="Permanent link">&para;</a></h2> <p>The system uses Python's standard <code>logging</code> module, configured to provide two distinct streams of information.</p> <h3 id=loggers>Loggers:<a class=headerlink href=#loggers title="Permanent link">&para;</a></h3> <ol> <li><strong><code>progress</code> logger</strong>: For high-level, user-facing messages. These are shown in the GUI and saved to <code>*.progress.log</code>.</li> <li><strong><code>verbose</code> logger</strong>: For detailed, internal messages. These are saved to the main <code>*.log</code> file.</li> </ol> <h3 id=implementation-details>Implementation details:<a class=headerlink href=#implementation-details title="Permanent link">&para;</a></h3> <ul> <li><strong>Log Rotation</strong>: The <code>setup_loggers</code> function checks the number of log files in the <code>logs</code> directory. If it exceeds a limit (15 pairs), it deletes the oldest pair (<code>.log</code> and <code>.progress.log</code>) to prevent the directory from growing indefinitely.</li> <li><strong>Handler Configuration</strong>: The function creates file handlers and stream (console) handlers for each logger, ensuring messages go to the right places. <code>propagate = False</code> is used to prevent messages from being handled by parent loggers, avoiding duplicate output.</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># from src/logging_manager.py</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=k>def</span><span class=w> </span><span class=nf>setup_loggers</span><span class=p>(</span><span class=n>session_timestamp</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>    <span class=c1># ... log rotation logic ...</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>    <span class=n>progress_logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s1>&#39;progress&#39;</span><span class=p>)</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>    <span class=n>progress_logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>    <span class=c1># Remove existing handlers to prevent duplicates</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>    <span class=k>for</span> <span class=n>handler</span> <span class=ow>in</span> <span class=n>progress_logger</span><span class=o>.</span><span class=n>handlers</span><span class=p>[:]:</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>        <span class=n>progress_logger</span><span class=o>.</span><span class=n>removeHandler</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>    <span class=c1># File handler for progress file</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>    <span class=n>progress_file_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=n>progress_log_filename</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s1>&#39;a&#39;</span><span class=p>)</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>    <span class=n>progress_logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>progress_file_handler</span><span class=p>)</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>    <span class=c1># Stream handler for progress (console output)</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>    <span class=n>progress_stream_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>    <span class=n>progress_logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>progress_stream_handler</span><span class=p>)</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>    <span class=n>progress_logger</span><span class=o>.</span><span class=n>propagate</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>    <span class=c1># ... similar setup for verbose_logger ...</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>    <span class=k>return</span> <span class=n>progress_logger</span><span class=p>,</span> <span class=n>verbose_logger</span><span class=p>,</span> <span class=n>session_timestamp</span>
</span></code></pre></div> <h2 id=4-profiling-and-timing-utilspy-profiling_configjson>4. Profiling and timing (<code>utils.py</code>, <code>profiling_config.json</code>)<a class=headerlink href=#4-profiling-and-timing-utilspy-profiling_configjson title="Permanent link">&para;</a></h2> <p>The <code>Profiler</code> class is the engine for the timing and progress estimation system.</p> <h3 id=key-concepts>Key concepts:<a class=headerlink href=#key-concepts title="Permanent link">&para;</a></h3> <ul> <li><strong>Phases and Weights</strong>: A study is divided into phases (<code>setup</code>, <code>run</code>, <code>extract</code>). <code>profiling_config.json</code> assigns a "weight" to each, representing its contribution to the total time. <div class="language-json highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>// from configs/profiling_config.json</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=p>{</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=nt>&quot;phase_weights&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>        </span><span class=nt>&quot;setup&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.299</span><span class=p>,</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>        </span><span class=nt>&quot;run&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.596</span><span class=p>,</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>        </span><span class=nt>&quot;extract&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.105</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>    </span><span class=nt>&quot;subtask_estimates&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>        </span><span class=nt>&quot;setup_simulation&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>48.16</span><span class=p>,</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>        </span><span class=nt>&quot;run_simulation_total&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>107.54</span><span class=p>,</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>        </span><span class=nt>&quot;extract_sar_statistics&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>4.09</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=p>}</span>
</span></code></pre></div></li> <li><strong>Dynamic Weights</strong>: The profiler normalizes these weights based on which phases are active (controlled by <code>execution_control</code> in the config). If a user chooses to only run the <code>extract</code> phase, its weight becomes 1.0, and the progress for that phase represents 100% of the total work.</li> <li><strong>Weighted Progress</strong>: The <code>get_weighted_progress</code> method provides a more accurate overall progress. <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># from src/utils.py</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=k>def</span><span class=w> </span><span class=nf>get_weighted_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>phase_name</span><span class=p>,</span> <span class=n>phase_progress</span><span class=p>):</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Calculates the overall progress based on phase weights.&quot;&quot;&quot;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=n>total_progress</span> <span class=o>=</span> <span class=mi>0</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=k>for</span> <span class=n>phase</span><span class=p>,</span> <span class=n>weight</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>phase_weights</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>        <span class=k>if</span> <span class=n>phase</span> <span class=o>==</span> <span class=n>phase_name</span><span class=p>:</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>            <span class=n>total_progress</span> <span class=o>+=</span> <span class=n>weight</span> <span class=o>*</span> <span class=n>phase_progress</span> <span class=c1># Add partial progress of current phase</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>        <span class=k>elif</span> <span class=n>phase</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>completed_phases</span><span class=p>:</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>            <span class=n>total_progress</span> <span class=o>+=</span> <span class=n>weight</span> <span class=c1># Add full weight of completed phases</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    <span class=k>return</span> <span class=n>total_progress</span> <span class=o>*</span> <span class=mi>100</span>
</span></code></pre></div></li> <li><strong>Time Estimation (ETA)</strong>: The <code>get_time_remaining</code> method is adaptive. Initially, it relies on the <code>subtask_estimates</code>. Once one or more stages have completed, it switches to a more accurate method based on the actual average time taken per stage.</li> <li><strong>Self-Improving Estimates</strong>: After a run, <code>save_estimates</code> calculates the average time for each timed subtask and writes these new averages back to <code>profiling_config.json</code>. This makes future estimates more accurate.</li> </ul> <h2 id=5-configuration-configpy>5. Configuration (<code>config.py</code>)<a class=headerlink href=#5-configuration-configpy title="Permanent link">&para;</a></h2> <p>The <code>Config</code> class uses a powerful inheritance mechanism to avoid duplicating settings.</p> <ul> <li> <p><strong>Inheritance</strong>: A config can "extend" a base config. The <code>_load_config_with_inheritance</code> method recursively loads the base config and merges it with the child config. The child's values override the parent's.</p> <p>```python</p> <h1 id=from-srcconfigpy>from src/config.py<a class=headerlink href=#from-srcconfigpy title="Permanent link">&para;</a></h1> <p>def _load_config_with_inheritance(self, path): config = self._load_json(path)</p> <div class="language-text highlight"><pre><span></span><code>if &quot;extends&quot; in config:
    base_config_path = self._resolve_config_path(config[&quot;extends&quot;])
    base_config = self._load_config_with_inheritance(base_config_path)

    # Merge the base configuration into the current one
    config = deep_merge(base_config, config)

return config
</code></pre></div> <p><code>`` For example,</code>near_field_config.json<code>might only specify the settings that differ from the main</code>base_config.json`.</p> </li> </ul> <h2 id=6-project-management>6. Project management<a class=headerlink href=#6-project-management title="Permanent link">&para;</a></h2> <ul> <li><strong><code>project_manager.py</code></strong>: This class is critical for reliability. The underlying <code>.smash</code> project files can become corrupted or locked. The <code>_is_valid_smash_file</code> method is a key defensive measure. It first attempts to rename the file to itself (a trick to check for file locks on Windows) and then uses <code>h5py</code> to ensure the file is a valid HDF5 container before attempting to open it in the simulation software. This prevents the application from crashing on a corrupted file.</li> </ul> <h2 id=7-phantom-rotation-for-by_cheek-placement>7. Phantom rotation for <code>by_cheek</code> placement<a class=headerlink href=#7-phantom-rotation-for-by_cheek-placement title="Permanent link">&para;</a></h2> <p>A specialized feature for the <code>by_cheek</code> placement scenario is the ability to rotate the phantom to meet the phone, rather than the other way around. This is controlled by a specific dictionary format in the configuration and uses an automatic angle detection algorithm to ensure precise placement.</p> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h3> <p>To enable this feature, the orientation in <code>placement_scenarios</code> is defined as a dictionary:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>&quot;orientations&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>&quot;cheek_base&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=nt>&quot;rotate_phantom_to_cheek&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nt>&quot;angle_offset_deg&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=p>}</span>
</span></code></pre></div> <ul> <li><code>rotate_phantom_to_cheek</code>: A boolean that enables or disables the phantom rotation.</li> <li><code>angle_offset_deg</code>: An integer that specifies an additional rotation away from the cheek (0 being the default).</li> </ul> <h3 id=automatic-angle-detection>Automatic angle detection<a class=headerlink href=#automatic-angle-detection title="Permanent link">&para;</a></h3> <p>The system uses a binary search algorithm to find the exact angle at which the phantom's "Skin" entity touches the phone's ground plane. This is handled by the <code>_find_touching_angle</code> method in <code>src/setups/near_field_setup.py</code>. The search is performed between 0 and 30 degrees with a precision of 0.5 degrees.</p> <h3 id=workflow-integration>Workflow integration<a class=headerlink href=#workflow-integration title="Permanent link">&para;</a></h3> <p>The phantom rotation is handled in the <code>NearFieldSetup.run_full_setup</code> method, occurring after the antenna is placed but before the final scene alignment. This ensures that the phone is positioned correctly relative to the un-rotated phantom, after which the phantom is rotated into the final position.</p> <h2 id=8-the-verify-and-resume-caching-system>8. The <code>Verify and Resume</code> caching system<a class=headerlink href=#8-the-verify-and-resume-caching-system title="Permanent link">&para;</a></h2> <p>GOLIAT integrates a <code>Verify and Resume</code> feature to prevent redundant computations by caching simulation results. The system intelligently determines whether a simulation with an identical configuration has already been successfully completed, skipping re-runs and saving significant time.</p> <h3 id=verification-workflow>Verification workflow<a class=headerlink href=#verification-workflow title="Permanent link">&para;</a></h3> <p>The verification logic is multi-tiered, prioritizing the integrity of the final result files ("deliverables") over simple metadata flags. This ensures robustness against interrupted runs or manual file deletions.</p> <ol> <li> <p><strong>Configuration hashing</strong>: Before verification, a "surgical" configuration is created. This is a snapshot containing only the parameters relevant to a single, specific simulation run (e.g., one phantom, one frequency, one placement). This configuration is then serialized and hashed (SHA256), producing a unique fingerprint that represents the exact setup.</p> </li> <li> <p><strong>Metadata and deliverable validation</strong>: The core logic resides in <code>ProjectManager.create_or_open_project</code>, which is called at the start of each simulation. It performs a sequence of checks:</p> <ul> <li><strong>Hash comparison</strong>: The hash of the current surgical configuration is compared against the <code>config_hash</code> stored in the <code>config.json</code> metadata file within the simulation's results directory. A mismatch signifies that the configuration has changed, rendering the cached results invalid and triggering a full re-run.</li> <li><strong><code>.smash</code> file integrity</strong>: If the hashes match, the system validates the <code>.smash</code> project file itself. This is a critical step for stability, as these files can become locked or corrupted. The validation involves checking for <code>.s4l_lock</code> files and verifying the HDF5 structure with <code>h5py</code>. A missing or corrupt <code>.smash</code> file indicates that the setup phase is incomplete.</li> <li><strong>Deliverable verification</strong>: This is the definitive check. The system looks for the actual output files generated by the <code>run</code> and <code>extract</code> phases. It verifies not only their existence but also that their modification timestamps are newer than the <code>setup_timestamp</code> recorded in the metadata.<ul> <li><strong>Run phase deliverables</strong>: A valid <code>*_Output.h5</code> file.</li> <li><strong>Extract phase deliverables</strong>: <code>sar_results.json</code>, <code>sar_stats_all_tissues.pkl</code>, and <code>sar_stats_all_tissues.html</code>.</li> </ul> </li> </ul> </li> <li> <p><strong>Status reporting and phase skipping</strong>: The verification process returns a detailed status dictionary, such as <code>{'setup_done': True, 'run_done': True, 'extract_done': False}</code>. The study orchestrator (<code>NearFieldStudy</code> or <code>FarFieldStudy</code>) uses this status to dynamically skip phases that are already complete. For instance, if <code>run_done</code> is <code>True</code>, the <code>do_run</code> flag for that specific simulation is internally set to <code>False</code>, and the run phase is skipped.</p> </li> <li> <p><strong>Metadata update</strong>: Upon the successful completion of the <code>run</code> and <code>extract</code> phases, the <code>BaseStudy._verify_and_update_metadata</code> method is triggered. It re-confirms that the deliverables exist on the file system and then updates the <code>run_done</code> or <code>extract_done</code> flags in the <code>config.json</code> file to <code>true</code>. This ensures the metadata accurately reflects the state of the deliverables for future runs.</p> </li> </ol> <p>This deliverable-first approach is a key design choice. It guarantees that the system is resilient; even if the metadata file claims a phase is complete, the absence of the actual result files will correctly force the system to re-run the necessary steps.</p> <h3 id=overriding-the-cache>Overriding the cache<a class=headerlink href=#overriding-the-cache title="Permanent link">&para;</a></h3> <p>The entire caching and verification mechanism can be bypassed using the <code>--no-cache</code> command-line flag.</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>python<span class=w> </span>run_study.py<span class=w> </span>--config<span class=w> </span>configs/my_study.json<span class=w> </span>--no-cache
</span></code></pre></div> <p>When this flag is active, GOLIAT will ignore any existing project files or metadata. It skips the verification process, deletes any existing <code>.smash</code> file for the target simulation, and executes all phases (setup, run, extract) from a clean state. This is the recommended approach for debugging, validating changes, or when a fresh run is explicitly required.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 28, 2025 20:11:03 UTC"><span class=timeago datetime=2025-10-28T20:11:03+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 28, 2025 20:11:03 UTC">2025-10-28</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 1, 1970 00:00:00 UTC"><span class=timeago datetime=1970-01-01T00:00:00+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 1, 1970 00:00:00 UTC">1970-01-01</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../technical_guide/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Technical Guide"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Technical Guide </div> </div> </a> <a href=../configuration/ class="md-footer__link md-footer__link--next" aria-label="Next: Configuration"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Configuration </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://github.com/rwydaegh/goliat target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> </body> </html>